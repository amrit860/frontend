{"ast":null,"code":"var _jsxFileName = \"/media/amrit/local Disk/frontend/AmritProject/fronted/src/component/product/ProductForm/add.productForm.js\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { httpClient } from \"../../../utils/httpclient\";\nimport { withRouter } from \"react-router-dom\";\nimport notification from \"../../../utils/notification\";\nconst IMG_URL = process.env.REACT_APP_IMG_URL;\nconst BASE_URL = process.env.REACT_APP_BASE_URL;\nconst defaultForm = {\n  name: \"\",\n  category: \"\",\n  brand: \"\",\n  description: \"\",\n  color: \"\",\n  tags: \"\",\n  manuDate: \"\",\n  expiryDate: \"\",\n  image: \"\",\n  discountedItem: false,\n  discountType: \"\",\n  discount: \"\",\n  warrantyItem: false,\n  warrantyPeriod: \"\",\n  price: \"\"\n};\n\nclass AddProductForm extends Component {\n  constructor() {\n    super();\n    this.uploadArray = [];\n    this.title = \"Add product\";\n\n    this.handleChange = e => {\n      let {\n        name,\n        value,\n        type,\n        checked,\n        files\n      } = e.target;\n\n      if (type === \"checkbox\") {\n        value = checked;\n      }\n\n      if (type === \"file\") {\n        console.log(e.target.files);\n        this.uploadArray = files;\n      }\n\n      this.setState(pre => ({\n        data: { ...pre.data,\n          [name]: value\n        }\n      }), () => {\n        this.validateForm(name);\n      });\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      this.setState({\n        isSubmitting: true\n      });\n\n      if (this.state.data._id) {\n        this.update();\n      } else {\n        this.add();\n      }\n    };\n\n    this.state = {\n      data: { ...defaultForm\n      },\n      err: { ...defaultForm\n      },\n      isSubmitting: false,\n      isValidForm: false\n    };\n  }\n\n  componentDidMount() {\n    console.log(\"props\", this.props);\n\n    if (this.props.title) {\n      this.title = this.props.title;\n    }\n\n    if (this.props.productData) {\n      this.setState({\n        data: { ...defaultForm,\n          ...this.props.productData\n        }\n      });\n    }\n  }\n\n  validateForm(fieldName) {\n    let errMsg;\n\n    switch (fieldName) {\n      case \"category\":\n        errMsg = this.state.data[fieldName] ? \"\" : \"category is required\";\n        break;\n\n      default:\n        break;\n    }\n\n    this.setState(pre => ({\n      error: { ...pre.error,\n        [fieldName]: errMsg\n      }\n    }), () => {\n      this.checkFormValidity();\n    });\n  }\n\n  checkFormValidity() {\n    const {\n      error\n    } = this.state;\n    let errors = Object.values(error).filter(err => err);\n    this.setState({\n      isValidForm: errors.length === 0\n    });\n  }\n\n  add() {\n    console.log(\"file array>>>\", this.uploadArray.length);\n    httpClient.upload(this.state.data, this.uploadArray).then(response => {\n      this.props.history.push(\"/View-Product\");\n      notification.showSuccess(\"sucessfully added\");\n      console.log(response.data);\n    }).catch(err => {\n      notification.showWarning(\"item upload failed\");\n    }).finally(() => this.setState({\n      isSubmitting: false\n    }));\n  }\n\n  update() {\n    axios.put(`http://localhost:2021/api/product/${this.state.data._id}`, this.state.data, {\n      headers: {\n        \"content-Type\": \"application/json\",\n        Authorization: localStorage.getItem(\"token\")\n      },\n      params: {},\n      responseType: \"json\"\n    }).then(response => {\n      console.log(\"success in axios call>>\", response);\n      this.props.history.push(\"/View Product\");\n    }).catch(err => {\n      console.log(\"error in axios call>>\", err.response);\n      this.setState({\n        isSubmitting: false\n      });\n    });\n  }\n\n  render() {\n    let discountContent = this.state.data.discountedItem ? React.createElement(React.Fragment, null, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, \"Discount Type\"), React.createElement(\"input\", {\n      className: \"form-control\",\n      type: \"text\",\n      value: this.state.data.discountType,\n      placeholder: \"DiscountType\",\n      name: \"discountType\",\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, \"Discount\"), React.createElement(\"input\", {\n      className: \"form-control\",\n      type: \"text\",\n      value: this.state.data.discount,\n      placeholder: \"Discount\",\n      name: \"discount\",\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    })) : \"\";\n    let warrantyContent = this.state.data.warrantyItem ? React.createElement(React.Fragment, null, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, \"warrantyPeriod\"), React.createElement(\"input\", {\n      className: \"form-control\",\n      type: \"text\",\n      value: this.state.data.warrantyPeriod,\n      placeholder: \"WarrantyPeriod\",\n      name: \"warrantyPeriod\",\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    })) : \"\";\n    let btn = this.state.isSubmitting ? React.createElement(\"button\", {\n      disabled: true,\n      className: \"btn btn-info\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }, \"submitting\") : React.createElement(\"button\", {\n      disabled: !this.state.isValidForm,\n      type: \"submit\",\n      className: \"btn btn-primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }, \"submit\");\n    return React.createElement(React.Fragment, null, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }, this.title, \" \"), React.createElement(\"form\", {\n      className: \"form-group\",\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }, \"Name\"), React.createElement(\"input\", {\n      className: \"form-control\",\n      type: \"text\",\n      value: this.state.data.name,\n      placeholder: \"Name\",\n      name: \"name\",\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }, \"Descrition \"), React.createElement(\"input\", {\n      className: \"form-control\",\n      type: \"text\",\n      value: this.state.data.description,\n      placeholder: \"Description\",\n      name: \"description\",\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231\n      },\n      __self: this\n    }, \"Color\"), React.createElement(\"input\", {\n      className: \"form-control\",\n      type: \"text\",\n      value: this.state.data.color,\n      placeholder: \"Color\",\n      name: \"color\",\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240\n      },\n      __self: this\n    }, \"Category\"), React.createElement(\"input\", {\n      className: \"form-control\",\n      type: \"text\",\n      value: this.state.data.category,\n      placeholder: \"Category\",\n      name: \"category\",\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      className: \"danger\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }, this.state.data.category), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250\n      },\n      __self: this\n    }, \"Brand\"), React.createElement(\"input\", {\n      className: \"form-control\",\n      type: \"text\",\n      value: this.state.data.brand,\n      placeholder: \"Brand\",\n      name: \"brand\",\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259\n      },\n      __self: this\n    }, \"Price\"), React.createElement(\"input\", {\n      className: \"form-control\",\n      type: \"number\",\n      value: this.state.data.price,\n      placeholder: \"Price\",\n      name: \"price\",\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268\n      },\n      __self: this\n    }, \"Tags\"), React.createElement(\"input\", {\n      className: \"form-control\",\n      type: \"text\",\n      value: this.state.data.tags,\n      placeholder: \"Tags\",\n      name: \"tags\",\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277\n      },\n      __self: this\n    }, \"Manu Date\"), React.createElement(\"input\", {\n      className: \"form-control\",\n      type: \"date\",\n      value: this.state.data.manuDate,\n      placeholder: \"ManuDate\",\n      name: \"manuDate\",\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286\n      },\n      __self: this\n    }, \"Expiry Date\"), React.createElement(\"input\", {\n      className: \"form-control\",\n      type: \"date\",\n      value: this.state.data.expiryDate,\n      placeholder: \"ExpiryDate\",\n      name: \"expirydate\",\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"checkbox\",\n      name: \"discountedItem\",\n      checked: this.state.data.discountedItem,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 301\n      },\n      __self: this\n    }, \"DiscountedItem\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 302\n      },\n      __self: this\n    }), discountContent, React.createElement(\"input\", {\n      type: \"checkbox\",\n      name: \"warrantyItem\",\n      checked: this.state.data.warrantyItem,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 305\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 311\n      },\n      __self: this\n    }, \"warrantyItem\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 312\n      },\n      __self: this\n    }), warrantyContent, React.createElement(\"input\", {\n      type: \"file\",\n      className: \"form-control\",\n      name: \"image\",\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 314\n      },\n      __self: this\n    }), btn));\n  }\n\n}\n\nexport default withRouter(AddProductForm);","map":{"version":3,"sources":["/media/amrit/local Disk/frontend/AmritProject/fronted/src/component/product/ProductForm/add.productForm.js"],"names":["React","Component","axios","httpClient","withRouter","notification","IMG_URL","process","env","REACT_APP_IMG_URL","BASE_URL","REACT_APP_BASE_URL","defaultForm","name","category","brand","description","color","tags","manuDate","expiryDate","image","discountedItem","discountType","discount","warrantyItem","warrantyPeriod","price","AddProductForm","constructor","uploadArray","title","handleChange","e","value","type","checked","files","target","console","log","setState","pre","data","validateForm","handleSubmit","preventDefault","isSubmitting","state","_id","update","add","err","isValidForm","componentDidMount","props","productData","fieldName","errMsg","error","checkFormValidity","errors","Object","values","filter","length","upload","then","response","history","push","showSuccess","catch","showWarning","finally","put","headers","Authorization","localStorage","getItem","params","responseType","render","discountContent","warrantyContent","btn"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { httpClient } from \"../../../utils/httpclient\";\nimport { withRouter } from \"react-router-dom\";\nimport notification from \"../../../utils/notification\";\n\nconst IMG_URL = process.env.REACT_APP_IMG_URL;\nconst BASE_URL = process.env.REACT_APP_BASE_URL;\n\nconst defaultForm = {\n  name: \"\",\n  category: \"\",\n  brand: \"\",\n  description: \"\",\n  color: \"\",\n  tags: \"\",\n  manuDate: \"\",\n  expiryDate: \"\",\n  image: \"\",\n  discountedItem: false,\n  discountType: \"\",\n  discount: \"\",\n  warrantyItem: false,\n  warrantyPeriod: \"\",\n  price: \"\",\n};\n\nclass AddProductForm extends Component {\n  uploadArray = [];\n  title = \"Add product\";\n  constructor() {\n    super();\n    this.state = {\n      data: { ...defaultForm },\n      err: { ...defaultForm },\n      isSubmitting: false,\n      isValidForm: false,\n    };\n  }\n  componentDidMount() {\n    console.log(\"props\", this.props);\n    if (this.props.title) {\n      this.title = this.props.title;\n    }\n    if (this.props.productData) {\n      this.setState({\n        data: {\n          ...defaultForm,\n          ...this.props.productData,\n        },\n      });\n    }\n  }\n\n  handleChange = (e) => {\n    let { name, value, type, checked, files } = e.target;\n    if (type === \"checkbox\") {\n      value = checked;\n    }\n    if (type === \"file\") {\n      console.log(e.target.files);\n      this.uploadArray = files;\n    }\n    this.setState(\n      (pre) => ({\n        data: {\n          ...pre.data,\n          [name]: value,\n        },\n      }),\n      () => {\n        this.validateForm(name);\n      }\n    );\n  };\n  validateForm(fieldName) {\n    let errMsg;\n    switch (fieldName) {\n      case \"category\":\n        errMsg = this.state.data[fieldName] ? \"\" : \"category is required\";\n        break;\n      default:\n        break;\n    }\n    this.setState(\n      (pre) => ({\n        error: {\n          ...pre.error,\n          [fieldName]: errMsg,\n        },\n      }),\n      () => {\n        this.checkFormValidity();\n      }\n    );\n  }\n  checkFormValidity() {\n    const { error } = this.state;\n    let errors = Object.values(error).filter((err) => err);\n    this.setState({\n      isValidForm: errors.length === 0,\n    });\n  }\n  handleSubmit = (e) => {\n    e.preventDefault();\n    this.setState({\n      isSubmitting: true,\n    });\n    if (this.state.data._id) {\n      this.update();\n    } else {\n      this.add();\n    }\n  };\n  add() {\n    console.log(\"file array>>>\", this.uploadArray.length);\n    httpClient\n      .upload(this.state.data, this.uploadArray)\n      .then((response) => {\n        this.props.history.push(\"/View-Product\");\n        notification.showSuccess(\"sucessfully added\");\n        console.log(response.data);\n      })\n      .catch((err) => {\n        notification.showWarning(\"item upload failed\");\n      })\n      .finally(() => this.setState({ isSubmitting: false }));\n  }\n\n  update() {\n    axios\n      .put(\n        `http://localhost:2021/api/product/${this.state.data._id}`,\n        this.state.data,\n        {\n          headers: {\n            \"content-Type\": \"application/json\",\n            Authorization: localStorage.getItem(\"token\"),\n          },\n          params: {},\n          responseType: \"json\",\n        }\n      )\n      .then((response) => {\n        console.log(\"success in axios call>>\", response);\n        this.props.history.push(\"/View Product\");\n      })\n      .catch((err) => {\n        console.log(\"error in axios call>>\", err.response);\n        this.setState({\n          isSubmitting: false,\n        });\n      });\n  }\n  render() {\n    let discountContent = this.state.data.discountedItem ? (\n      <>\n        <label>Discount Type</label>\n        <input\n          className=\"form-control\"\n          type=\"text\"\n          value={this.state.data.discountType}\n          placeholder=\"DiscountType\"\n          name=\"discountType\"\n          onChange={this.handleChange}\n        ></input>\n        <label>Discount</label>\n        <input\n          className=\"form-control\"\n          type=\"text\"\n          value={this.state.data.discount}\n          placeholder=\"Discount\"\n          name=\"discount\"\n          onChange={this.handleChange}\n        ></input>\n      </>\n    ) : (\n      \"\"\n    );\n\n    let warrantyContent = this.state.data.warrantyItem ? (\n      <>\n        <label>warrantyPeriod</label>\n        <input\n          className=\"form-control\"\n          type=\"text\"\n          value={this.state.data.warrantyPeriod}\n          placeholder=\"WarrantyPeriod\"\n          name=\"warrantyPeriod\"\n          onChange={this.handleChange}\n        ></input>\n      </>\n    ) : (\n      \"\"\n    );\n    let btn = this.state.isSubmitting ? (\n      <button disabled={true} className=\"btn btn-info\">\n        submitting\n      </button>\n    ) : (\n      <button\n        disabled={!this.state.isValidForm}\n        type=\"submit\"\n        className=\"btn btn-primary\"\n      >\n        submit\n      </button>\n    );\n    return (\n      <>\n        <h2>{this.title} </h2>\n        <form className=\"form-group\" onSubmit={this.handleSubmit}>\n          <label>Name</label>\n          <input\n            className=\"form-control\"\n            type=\"text\"\n            value={this.state.data.name}\n            placeholder=\"Name\"\n            name=\"name\"\n            onChange={this.handleChange}\n          ></input>\n          <label>Descrition </label>\n          <input\n            className=\"form-control\"\n            type=\"text\"\n            value={this.state.data.description}\n            placeholder=\"Description\"\n            name=\"description\"\n            onChange={this.handleChange}\n          ></input>\n          <label>Color</label>\n          <input\n            className=\"form-control\"\n            type=\"text\"\n            value={this.state.data.color}\n            placeholder=\"Color\"\n            name=\"color\"\n            onChange={this.handleChange}\n          ></input>\n          <label>Category</label>\n          <input\n            className=\"form-control\"\n            type=\"text\"\n            value={this.state.data.category}\n            placeholder=\"Category\"\n            name=\"category\"\n            onChange={this.handleChange}\n          ></input>\n          <p className=\"danger\">{this.state.data.category}</p>\n          <label>Brand</label>\n          <input\n            className=\"form-control\"\n            type=\"text\"\n            value={this.state.data.brand}\n            placeholder=\"Brand\"\n            name=\"brand\"\n            onChange={this.handleChange}\n          ></input>\n          <label>Price</label>\n          <input\n            className=\"form-control\"\n            type=\"number\"\n            value={this.state.data.price}\n            placeholder=\"Price\"\n            name=\"price\"\n            onChange={this.handleChange}\n          ></input>\n          <label>Tags</label>\n          <input\n            className=\"form-control\"\n            type=\"text\"\n            value={this.state.data.tags}\n            placeholder=\"Tags\"\n            name=\"tags\"\n            onChange={this.handleChange}\n          ></input>\n          <label>Manu Date</label>\n          <input\n            className=\"form-control\"\n            type=\"date\"\n            value={this.state.data.manuDate}\n            placeholder=\"ManuDate\"\n            name=\"manuDate\"\n            onChange={this.handleChange}\n          ></input>\n          <label>Expiry Date</label>\n          <input\n            className=\"form-control\"\n            type=\"date\"\n            value={this.state.data.expiryDate}\n            placeholder=\"ExpiryDate\"\n            name=\"expirydate\"\n            onChange={this.handleChange}\n          ></input>\n          <input\n            type=\"checkbox\"\n            name=\"discountedItem\"\n            checked={this.state.data.discountedItem}\n            onChange={this.handleChange}\n          ></input>\n          <label>DiscountedItem</label>\n          <br></br>\n\n          {discountContent}\n          <input\n            type=\"checkbox\"\n            name=\"warrantyItem\"\n            checked={this.state.data.warrantyItem}\n            onChange={this.handleChange}\n          ></input>\n          <label>warrantyItem</label>\n          <br></br>\n          {warrantyContent}\n          <input\n            type=\"file\"\n            className=\"form-control\"\n            name=\"image\"\n            onChange={this.handleChange}\n          ></input>\n          {btn}\n        </form>\n      </>\n    );\n  }\n}\nexport default withRouter(AddProductForm);\n"]},"metadata":{},"sourceType":"module"}